{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"./wikipedia.service\";\nimport * as i2 from \"./data-access.service\";\n\nfunction AppComponent_app_page_list_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"app-page-list\", 3);\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"actionHide\", ctx_r0.actionHide)(\"searchVal\", ctx_r0.search)(\"pages\", ctx_r0.pages);\n  }\n}\n\nexport let AppComponent = /*#__PURE__*/(() => {\n  class AppComponent {\n    constructor(wikipedia, dataAccess) {\n      this.wikipedia = wikipedia;\n      this.dataAccess = dataAccess;\n      this.title = 'wikiSearch3';\n      this.search = '';\n      this.actionHide = true;\n    }\n\n    onPrevSearch() {\n      this.actionHide = true;\n      this.dataAccess.executeDataAccessDefaultService().subscribe(response => {\n        //this.resp = response;\n        this.pages = response;\n        this.flag = true;\n        this.search = \"Previous Searches\";\n      });\n    }\n\n    submitVal(val) {\n      console.log(val);\n      this.actionHide = false;\n      this.search = val;\n      /*for (let index = 0; index < this.pages.length; index++) {\r\n        const element = this.pages[index];\r\n        this.dataAccess.executeDataSaveService(element).subscribe((response:any)=>{\r\n          console.log(\"Saved?\"+index);\r\n        });\r\n      }*/\n    }\n    /*\r\n     this.dataAccess.executeDataAccessBeanService().subscribe((response:any)=>{\r\n      //console.log(this.dataAccess.executeDataAccessBeanService());\r\n      //console.log(JSON.parse(this.dataAccess.executeDataAccessBeanService()).recrdset);\r\n      console.log(response);\r\n      ////this.wow=response;//[0].message();\r\n      ////let dataWow=this.wow;\r\n      ////console.log(dataWow.message);////these work\r\n      ///console.log(response.message);//this also works\r\n      \r\n      //this.wow= JSON.parse(response).recordset;\r\n      //let wow= response.dataAccess.executeDataAccessBeanService();\r\n      //console.log(JSON.stringify(this.wow));\r\n    });\r\n    */\n\n\n    onTerm(term) {\n      //console.log('I am the app and here is the term:', term);\n      //const results=this.wikipedia.search(term);\n      //console.log(results);\n      this.wikipedia.search(term).subscribe(response => {\n        //console.log(response);\n        this.actionHide = false;\n        this.pages = response.query.search;\n        this.pages.map(o => {\n          o['pageId'] = '' + o.pageid;\n          o['wordCount'] = '' + o.wordcount;\n        });\n        this.dataAccess.executeDataSaveService(this.pages).subscribe(response => {\n          console.log(\"Saved?\");\n        }); //check the structure of response json for details\n      }); // for (let index = 0; index < this.pages.length; index++) {\n      //   const element = this.pages[index];\n      //   this.dataAccess.executeDataSaveService(element).subscribe((response:any)=>{\n      //     console.log(\"Saved?\"+index);\n      //   });  \n      // }\n      //err=>{console.error(err)};\n    }\n\n  }\n\n  AppComponent.ɵfac = function AppComponent_Factory(t) {\n    return new (t || AppComponent)(i0.ɵɵdirectiveInject(i1.WikipediaService), i0.ɵɵdirectiveInject(i2.DataAccessService));\n  };\n\n  AppComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: AppComponent,\n    selectors: [[\"app-root\"]],\n    decls: 4,\n    vars: 1,\n    consts: [[3, \"submitted\"], [3, \"click\"], [3, \"actionHide\", \"searchVal\", \"pages\", 4, \"ngIf\"], [3, \"actionHide\", \"searchVal\", \"pages\"]],\n    template: function AppComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"app-search-bar\", 0);\n        i0.ɵɵlistener(\"submitted\", function AppComponent_Template_app_search_bar_submitted_0_listener($event) {\n          return ctx.onTerm($event);\n        })(\"submitted\", function AppComponent_Template_app_search_bar_submitted_0_listener($event) {\n          return ctx.submitVal($event);\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(1, \"button\", 1);\n        i0.ɵɵlistener(\"click\", function AppComponent_Template_button_click_1_listener() {\n          return ctx.onPrevSearch();\n        });\n        i0.ɵɵtext(2, \"See Previous Searches\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(3, AppComponent_app_page_list_3_Template, 1, 3, \"app-page-list\", 2);\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngIf\", ctx.pages.length);\n      }\n    },\n    styles: [\"\"]\n  });\n  return AppComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}